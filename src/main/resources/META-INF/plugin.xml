<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.github.nvelychenko.drupalextend</id>
    <name>Drupal extend</name>
    <vendor>nvelychenko</vendor>
    <description><![CDATA[
<h1>Extends Drupal integration with PHPStorm.</h1>

<h2>Features</h2>

<ul>
    <li>Autocomplete for Content/Config Entity Storages</li>
    <li>Fields autocomplete (for now config directory is hardcoded to the <b>config/sync</b>, project setting is WIP)</li>
    <li>Fields property autocomplete e.g. <code>$node->get('author')->entity</code>. it will autocomplete <em>entity</em></li>
    <li>References for Storages and Fields (Ctrl + Click)</li>
    <li>Type provider for <code>load/loadMultiple/loadByProperties</code> storage methods e.g. <code>$node = $node_storage->load(1)</code> here it will know what is $node</li>
    <li>Type provider for static methods e.g. <code>Node::load/loadMultiple/create</code></li>
    <li>Type provider entity storages</li>
    <li>Type provider for field item lists</li>
    <li>Type provider for field items (WIP)</li>
</ul>

]]></description>

    <extensions defaultExtensionNs="com.intellij">
        <fileBasedIndex implementation="com.github.nvelychenko.drupalextend.index.FieldTypeIndex"/>
        <fileBasedIndex implementation="com.github.nvelychenko.drupalextend.index.ConfigEntityIndex"/>
        <fileBasedIndex implementation="com.github.nvelychenko.drupalextend.index.FieldsIndex"/>
        <fileBasedIndex implementation="com.github.nvelychenko.drupalextend.index.ContentEntityIndex"/>
        <fileBasedIndex implementation="com.github.nvelychenko.drupalextend.index.ContentEntityFqnIndex"/>
        <fileBasedIndex implementation="com.github.nvelychenko.drupalextend.index.RenderElementIndex"/>

        <psi.referenceContributor implementation="com.github.nvelychenko.drupalextend.reference.DrupalReferenceContributor"
                                  language="PHP"/>

        <completion.contributor order="first" language="PHP" implementationClass="com.github.nvelychenko.drupalextend.completion.DrupalCompletionContributor"/>
        <completion.contributor order="last" language="PHP" implementationClass="com.github.nvelychenko.drupalextend.completion.FieldMagicMethodCompletionContributor"/>
    </extensions>

    <extensions defaultExtensionNs="com.jetbrains.php">
        <typeProvider4 implementation="com.github.nvelychenko.drupalextend.type.EntityStorageTypeProvider"/>
        <typeProvider4 implementation="com.github.nvelychenko.drupalextend.type.EntityFromStorageTypeProvider"/>
        <typeProvider4 implementation="com.github.nvelychenko.drupalextend.type.StaticContentEntityTypeProvider"/>
        <typeProvider4 implementation="com.github.nvelychenko.drupalextend.type.FieldItemListTypeProvider"/>
    </extensions>

    <depends>com.jetbrains.php</depends>
    <depends>com.intellij.modules.platform</depends>
    <depends>org.jetbrains.plugins.yaml</depends>
    <depends>com.jetbrains.php.drupal</depends>

    <depends optional="true" config-file="symfony.xml">fr.adrienbrault.idea.symfony2plugin</depends>
    <depends optional="true" config-file="annotation.xml">de.espend.idea.php.annotation</depends>
</idea-plugin>
